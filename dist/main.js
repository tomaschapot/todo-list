(()=>{"use strict";class t{constructor(t,e,a="No Date",s){this.title=t,this.description=e,this.dueDate=a,this.priority=s,this.status=!1}completeTask(){this.status=!0}setTitle(t){this.title=t}getTitle(){return this.title}setDescription(t){this.description=t}getDescription(){return this.description}setdueDate(t){this.dueDate=t}getDueDate(){return this.dueDate}setPriority(t){this.priority=t}getPriority(){return this.priority}setStatus(t){this.status=t}getStatus(){return this.status}}class e{static setTask(t){localStorage.setItem(t.title,JSON.stringify(t))}static getTask(t){return JSON.parse(localStorage.getItem(t))}static removeTask(t){localStorage.removeItem(t)}}const a=document.querySelector("#add-task"),s=document.querySelector("#clear-task"),r=document.querySelector(".project-grid"),i=document.querySelector("#add-button");let n=new class{constructor(t){this.title=t,this.tasks=[]}setTitle(t){this.title=t}getTitle(){return this.title}setCategory(t){this.category=t}getCategory(){return this.category}setTasks(t){this.tasks=t}getTasks(){return this.tasks}addTask(t){this.tasks.includes(t)||this.tasks.push(t)}deleteTask(t){this.tasks.forEach((e=>{let a=0;e.title===t&&this.tasks.splice(a,1),a+=1}))}clearAllTasks(){this.tasks=[]}}("Default");class c{static loadStorage(){for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t),s=e.getTask(a);c.displayCreatedTask(s)}}static initializeEventListeners(){a.addEventListener("click",(()=>{c.createTaskInput(),c.removeFirstAddButton()})),s.addEventListener("click",(()=>{c.removeAllTasks(),c.displayFirstAddButton()})),i.addEventListener("click",(()=>{c.createTaskInput(),c.removeFirstAddButton()})),r.addEventListener("mouseover",(function(t){"task-status"===t.target.classList[2]&&c.changeStatusToCompleted(t)})),r.addEventListener("mouseout",(function(t){"task-status"===t.target.classList[2]&&c.changeStatusToPending(t)})),r.addEventListener("keydown",(t=>{c.keyboardEvents(t)})),r.addEventListener("click",(function(t){"button-delete"==t.target.classList[1]&&c.cancelTaskInput(),"button-create"==t.target.classList[1]&&(c.displayCreatedTask(c.createTaskfromInput()),c.cancelTaskInput()),"task-status"===t.target.classList[2]&&(c.removeTask(t),0===r.childElementCount&&c.displayFirstAddButton())})),r.addEventListener("dragstart",(t=>{(t.target.draggable="true")&&t.target.classList.add("dragging")})),r.addEventListener("dragend",(t=>{(t.target.draggable="true")&&t.target.classList.remove("dragging")})),r.addEventListener("dragover",(t=>{t.preventDefault(),c.createTaskDrag(t)}))}static keyboardEvents(t){"task-textarea"!==t.target.classList[0]&&"task-input"!==t.target.classList[0]||("Enter"===t.code&&(c.displayCreatedTask(c.createTaskfromInput()),c.cancelTaskInput()),"Escape"===t.code&&c.cancelTaskInput())}static descriptionRandomizer(){const t=["Work meeting till 11pm","Cook dinner for my friends","Clean up the pool","Buy new couch","Start my own company","Brush my teeth","Create a new cooking recipe","Drive to New York","Have Dinner at 10pm"];return t[Math.floor(Math.random()*t.length)]}static displayFirstAddButton(){i.style.display="block"}static removeFirstAddButton(){i.style.display="none"}static createTaskInput(){if(null===r.querySelector("#task-input")){let t=document.createElement("div");t.classList.add("task-container"),t.id="task-input";let e=document.createElement("div");e.classList.add("task");let a=document.createElement("input");a.placeholder=c.descriptionRandomizer(),a.classList.add("task-input","title-container","task-resources");let s=document.createElement("textarea");s.placeholder="Description",s.classList.add("task-textarea");let i=document.createElement("div");i.classList.add("task-resources");let n=document.createElement("input");n.type="date",n.classList.add("task-date");let l=document.createElement("i");l.classList.add("fa-solid","fa-list-check");let d=document.createElement("div");d.classList.add("create-delete-buttons");let o=document.createElement("button");o.textContent="Create",o.classList.add("button","button-create");let u=document.createElement("button");u.textContent="Cancel",u.classList.add("button","button-delete"),r.insertBefore(t,r.firstChild),t.append(e,d),e.append(a,s,i),i.append(l,n),d.append(o,u)}}static getDragAfterElement(t,e){return[...t.querySelectorAll(".task-container:not(.dragging)")].reduce(((t,a)=>{const s=a.getBoundingClientRect(),r=e-s.top-s.height/2;return r<0&&r>t.offset?{offset:r,element:a}:t}),{offset:Number.NEGATIVE_INFINITY}).element}static createTaskDrag(t){const e=c.getDragAfterElement(r,t.clientY);let a=document.querySelector(".dragging");void 0===e?r.appendChild(a):r.insertBefore(a,e)}static cancelTaskInput(){let t=r.querySelector("#task-input");null!==t&&(t.remove(),0===r.childElementCount&&c.displayFirstAddButton())}static removeAllTasks(){for(;r.firstChild;)r.removeChild(r.firstChild);n.clearAllTasks(),localStorage.clear()}static removeTask(t){let e=t.target.closest(".task-container"),a=t.target.closest(".task-created").querySelector(".task-title").textContent;e.remove(),n.deleteTask(a),localStorage.removeItem(a)}static createTaskfromInput(){const a=document.querySelector(".task-input").value,s=document.querySelector(".task-textarea").value,r=document.querySelector(".task-date").value;let i=new t(a,s,r);return n.addTask(i),e.setTask(i),i}static onDragStart(t){t.currentTarget.style.backgroundColor="red"}static displayCreatedTask(t){let e=t,a=document.createElement("div");a.classList.add("task-container"),a.draggable="true",a.id=Date.now();let s=document.createElement("div");s.classList.add("task-created");let i=document.createElement("div");i.classList.add("title-container","task-resources");let n=document.createElement("i");n.classList.add("fa-regular","fa-circle","task-status");let c=document.createElement("h4");c.classList.add("task-title"),c.textContent=e.title;let l=document.createElement("p");l.classList.add("task-desc"),l.textContent=e.description;let d=document.createElement("div");d.classList.add("task-resources");let o=document.createElement("p");o.textContent=`Due Date: ${e.dueDate}`,o.classList.add("task-date");let u=document.createElement("i");u.classList.add("fa-solid","fa-list-check"),r.insertBefore(a,r.firstChild),a.appendChild(s),s.append(i,d),i.append(n,c,l),d.append(u,o)}static changeStatusToCompleted(t){t.target.classList.replace("fa-circle","fa-circle-check")}static changeStatusToPending(t){t.target.classList.replace("fa-circle-check","fa-circle")}}c.initializeEventListeners(),window.onload=c.loadStorage})();